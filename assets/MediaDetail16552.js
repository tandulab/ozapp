import{_ as Y,s as Z,a as ee,b as te,c as se,d as ae,e as oe,f as le,g as ie}from"./index165525.js";import{a as ne,b as re,A as ce}from"./LazyDataTable16552.js";import{d as A,r as g,y as P,z as K,o as v,e as G,w as u,A as ue,c as w,a as e,t as _,f as s,u as f,C as de,D as me,x as O,E as pe,F as fe,q as D,H as _e,I as ve,n as xe,k as C,J as ge,K as be,v as B,T as he,b as ye}from"../index16552.js";import{u as j}from"./media16552.js";import{s as we}from"./index16552.js";import{s as Ce}from"./index165523.js";import{s as $e}from"./WarningTable.vue_vue_type_script_setup_true_lang16552.js";import{u as Q}from"./settings16552.js";import{a as ke}from"./date16552.js";import"./index165526.js";import"./index165524.js";import"./index165527.js";import"./index165528.js";import"./user16552.js";import"./index165522.js";const Se={key:0,class:"flex flex-col items-center p-8 bg-surface-0 dark:bg-surface-900 rounded-sm"},Me={class:"font-bold text-2xl block mb-2 mt-6"},Ve={class:"mb-0"},De={class:"flex flex-col mb-8 mt-4"},Te={class:"flex items-center gap-2 mt-6"},ze=A({__name:"ChangeStatusVideo",setup(T){const d=j(),m=Q(),l=g(),i=P(()=>d.currentMedia);async function t(){var r,o;try{l.value.value?await d.enableMedia(((r=i==null?void 0:i.value)==null?void 0:r.id)+""):await d.disableMedia(((o=i==null?void 0:i.value)==null?void 0:o.id)+""),me(`Stato video cambiato in ${l.value.label}`)}catch(c){console.error(c)}}return K(i,r=>{r&&(l.value=m.getVideoStatus().find(o=>o.value===r.online))},{immediate:!0}),(r,o)=>{const c=ne,n=O,b=ue;return v(),G(b,{group:"change-status-video"},{container:u(({message:h,acceptCallback:y,rejectCallback:p})=>[i.value?(v(),w("div",Se,[o[2]||(o[2]=e("div",{class:"rounded-full text-primary-contrast inline-flex justify-center items-center"},[e("i",{class:"pi pi-media text-4xl!"})],-1)),e("span",Me,_(h.header),1),e("p",Ve,_(h.message),1),e("div",De,[o[1]||(o[1]=e("label",{for:"notifications_type",class:"text-muted-color font-500 mb-1"},"Cambia stato",-1)),s(c,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),options:f(m).getVideoStatus(),"option-label":"label",class:"w-full md:w-60"},null,8,["modelValue","options"])]),e("div",Te,[s(n,{label:"Annulla",outlined:"",onClick:p,class:"w-32"},null,8,["onClick"]),s(n,{label:"Procedi",onClick:a=>{t(),y()},class:"w-32"},null,8,["onClick"])])])):de("",!0)]),_:1})}}}),Be={class:"flex items-center gap-2 w-full"},Ae={class:"uppercase font-semibold sm:text-xl mb-2 min-h-[24px]"},Pe={class:"flex justify-end w-full"},je={class:"flex items-baseline"},Ee={class:"flex flex-row-reverse sm:flex-col"},Ne={class:"grid grid-cols-none md:grid-cols-[auto_1fr] p-6 pt-0"},Ie={class:"flex items-center flex-col"},Le={key:1,class:"w-[440px] h-[248px] sm:w-[320px] sm:h-[180px] mb-3 bg-gray-200 flex items-center justify-center"},qe={class:"flex flex-col"},Fe={class:"sm:pl-6"},Ue={class:"pt-4 md:pt-0 text-center md:text-left uppercase font-semibold text-xl mb-2 min-h-[24px]"},He={class:"flex flex-wrap justify-between"},Je={class:"flex flex-col sm:flex-row gap-1 sm:gap-7 align-center"},Ke={class:"flex items-center"},Ge={class:"flex gap-4 align-center"},Oe={class:"flex items-center gap-1"},Qe={class:"flex items-center gap-1"},Re={class:"flex flex-col sm:flex-row gap-1 sm:gap-7 align-center pt-4"},We={class:"flex flex-col"},Xe={class:"flex pt-4"},Ye={class:"flex flex-col"},Ze=A({__name:"MediaDataCard",setup(T){const d=j(),m=Q(),l=g(),i=g([{items:[{label:"Cambia stato",command:()=>{y()}},{label:"Elimina video",command:()=>{h()}}]}]),t=P(()=>d.currentMedia),r=g(!1),o=g(!1),c=pe();async function n(p){try{await d.deleteMedia(p),await be.push({name:B.media})}catch(a){console.error(a)}}function b(p){r.value=p,p?setTimeout(()=>{o.value=!0},500):o.value=!1}function h(){$e({message:"Stai per eliminare il video. Vuoi confermare l'operazione?",header:"Eliminazione video",acceptCallback(){t.value&&n(t.value.id)}})}function y(){c.require({message:"",header:"Aggiorna stato video",group:"change-status-video",accept:()=>{},reject:()=>{}})}return(p,a)=>{const M=re,x=O,R=ge,W=Ce,X=we,z=he;return v(),w(fe,null,[s(X,{class:"mt-4",toggleable:"",collapsed:r.value,"onUpdate:collapsed":b},{header:u(()=>{var $,k,S;return[D(e("div",Be,[e("p",Ae,_(($=t.value)==null?void 0:$.title),1)],512),[[_e,r.value&&o.value]]),e("div",Pe,[e("div",je,[D(s(M,{value:f(m).getPrettyVideoStatus((k=t.value)==null?void 0:k.online),severity:f(m).getColorVideoStatus((S=t.value)==null?void 0:S.online),rounded:""},null,8,["value","severity"]),[[z,"Stato",void 0,{top:!0}]]),s(x,{icon:"pi pi-cog",severity:"secondary",rounded:"",text:"",onClick:a[0]||(a[0]=V=>f(ve)(l.value,V))}),s(R,{ref_key:"menu",ref:l,id:"config_menu",model:i.value,popup:""},null,8,["model"])])])]}),default:u(()=>{var $,k,S,V,E,N,I,L,q,F,U,H,J;return[e("div",Ee,[e("div",Ne,[e("div",Ie,[($=t.value)!=null&&$.attachment_url?(v(),G(f(Y),{key:0,type:"default",previewImageLink:(k=t.value)==null?void 0:k.attachment_img_preview_url,link:(S=t.value)==null?void 0:S.attachment_url,progress:30,isMuted:!1,isControls:!0,class:"w-[440px] h-[248px] sm:w-[320px] sm:h-[180px] mb-3"},null,8,["previewImageLink","link"])):(v(),w("div",Le,a[1]||(a[1]=[e("i",null,"Errore nel caricamento video",-1)]))),e("div",qe,[s(M,{value:f(m).getPrettyVideoCategory(((V=t.value)==null?void 0:V.category)+""),class:xe([f(m).getColorCategory(((E=t.value)==null?void 0:E.category)+""),"flex items-center mr-2 mb-2 flex-1"]),rounded:""},null,8,["value","class"])])]),e("div",Fe,[e("div",null,[e("h1",Ue,_((N=t.value)==null?void 0:N.title),1)]),e("div",He,[e("div",Je,[e("div",Ke,[s(W,{image:(L=(I=t.value)==null?void 0:I.user)==null?void 0:L.profile_picture_url,class:"mr-2",shape:"circle"},null,8,["image"]),e("span",null,_((F=(q=t.value)==null?void 0:q.user)==null?void 0:F.full_name),1)])]),e("div",Ge,[D((v(),w("div",Oe,[a[2]||(a[2]=e("i",{class:"pi pi-heart-fill text-pink-500 mr-1"},null,-1)),C(" "+_(((U=t.value)==null?void 0:U.likes_counter)||0),1)])),[[z,"Like ricevuti",void 0,{top:!0}]]),D((v(),w("div",Qe,a[3]||(a[3]=[e("i",{class:"pi pi-eye text-blue-500 mr-1"},null,-1),C(" - ")]))),[[z,"Visualizzazioni",void 0,{top:!0}]])])]),a[6]||(a[6]=e("hr",{class:"mt-2"},null,-1)),e("div",Re,[e("div",We,[a[4]||(a[4]=e("p",{class:"uppercase text-muted-color font-medium mb-4 text-xs"}," data di pubblicazione ",-1)),C(" "+_(f(ke)((H=t.value)==null?void 0:H.created_at)),1)])]),e("div",Xe,[e("div",Ye,[a[5]||(a[5]=e("p",{class:"uppercase text-muted-color font-medium mb-4 text-xs"}," descrizione ",-1)),C(" "+_(((J=t.value)==null?void 0:J.description)||"-"),1)])])])])])]}),_:1},8,["collapsed"]),s(ze)],64)}}}),_t=A({__name:"MediaDetail",props:{id:{}},setup(T){const d=T,m=j(),l=g([]),i=g(!1),t=P(()=>m.currentMedia);function r(){l.value=[{label:"Tutti i media",route:{name:B.media}}],l.value.push({label:"Dettaglio video",route:{name:B.mediaDettaglio,params:{id:d.id}}})}async function o(c){try{i.value=!0;const n=new Map;await m.fetchMediaDetail(c,n)}catch(n){console.error(n)}finally{i.value=!1}}return K(()=>t.value,c=>{c&&(l.value[l.value.length-1].label=c.title)}),ye(()=>{r(),d.id&&o(d.id)}),(c,n)=>{const b=se,h=ae,y=oe,p=le,a=ie,M=Z;return v(),w("div",null,[s(ce,{items:l.value},null,8,["items"]),s(Ze),s(M,{class:"mt-4"},{content:u(()=>[s(a,{scrollable:"",value:"0"},{default:u(()=>[s(h,null,{default:u(()=>[s(b,{value:"0"},{default:u(()=>n[0]||(n[0]=[C("Segnalazioni")])),_:1}),s(b,{value:"1"},{default:u(()=>n[1]||(n[1]=[C("Commenti")])),_:1})]),_:1}),s(p,null,{default:u(()=>[s(y,{value:"0"},{default:u(()=>{var x;return[s(ee,{video_id:(x=t.value)==null?void 0:x.id},null,8,["video_id"])]}),_:1}),s(y,{value:"1"},{default:u(()=>{var x;return[s(te,{video_id:(x=t.value)==null?void 0:x.id},null,8,["video_id"])]}),_:1})]),_:1})]),_:1})]),_:1})])}}});export{_t as default};
