import{u as R,T as n,g as P,L as j,c as A,s as q,b as G,A as H}from"./role95584.js";import{d as S,r as c,j as U,b as z,o as T,c as $,f as a,w as o,k as p,a as r,l as W,n as M,u as i,q as Y,x as J,T as X,t as F,v as Z}from"../index95584.js";import{u as D}from"./user95584.js";import{s as ee}from"./index955844.js";import{s as ae}from"./index955845.js";import"./index955842.js";const te={class:"flex items-center gap-x-2"},oe={class:"flex items-center gap-x-2"},se={class:"flex items-center gap-x-2"},le={class:"flex items-center gap-x-2"},ne={class:"flex items-center justify-center"},V=10,re=S({__name:"NotificationTable",setup(E){const m=c(),f=c([{name:"Segnalazioni effettuate",code:"NY"},{name:"Segnalazioni ricevute",code:"RM"}]),u=D(),{users:v,totalUsers:_}=U(u),{onSort:x,onPage:k,onFilter:L,loadLazyData:C,isLoading:N}=R({rows:V},O);c(!1);const h=c({id:{value:"",matchMode:n.EQ},email:{value:"",matchMode:n.LIKE},role:{value:"",matchMode:n.EQ},first_name:{value:"",matchMode:n.LIKE},last_name:{value:"",matchMode:n.LIKE},partner_id:{value:"",matchMode:n.EQ},full_name:{value:"",matchMode:n.LIKE},date_open:{value:null,matchMode:n.EQ},date_close:{value:null,matchMode:n.EQ}});function K(){L(h.value)}async function O(y){try{await u.fetchUsers(y)}catch(t){console.error(t)}}return z(()=>{m.value=f.value[0],C()}),(y,t)=>{const b=A,d=q,g=ae,B=ee,w=J,I=G,Q=X;return T(),$("div",null,[a(j,{value:i(v),rows:V,"total-records":i(_),onSort:i(x),onPage:i(k),onFilter:K,filters:h.value,"onUpdate:filters":t[0]||(t[0]=e=>h.value=e),"data-key":"id",scrollable:"",loading:i(N),rowHover:!0,showGridlines:""},{empty:o(()=>t[6]||(t[6]=[p("Non ci sono segnalazioni")])),default:o(()=>[a(d,{class:"min-w-[100px]",header:"Elemento",field:"type",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!0},{filter:o(({filterModel:e,filterCallback:l})=>t[1]||(t[1]=[])),body:o(({data:e})=>[a(b,{value:"Media",severity:"info"})]),_:1}),a(d,{class:"min-w-[200px]",header:"Messaggio",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{body:o(({data:e})=>t[2]||(t[2]=[r("div",{class:"flex items-center gap-2"},[r("span",null," Video di minorenni ")],-1)])),_:1}),a(d,{class:"min-w-[200px]",header:"Data apertura",field:"date_open",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:o(({filterModel:e,filterCallback:l})=>[r("div",te,[a(g,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,dateFormat:"dd/mm/yy",placeholder:"Filtra",onDateSelect:s=>l()},null,8,["modelValue","onUpdate:modelValue","onDateSelect"])])]),body:o(()=>t[3]||(t[3]=[p(" 02/01/2025 ")])),_:1}),a(d,{class:"min-w-[200px]",header:"Data chiusura",field:"date_close",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:o(({filterModel:e,filterCallback:l})=>[r("div",oe,[a(g,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,dateFormat:"dd/mm/yy",placeholder:"Filtra",onDateSelect:s=>l()},null,8,["modelValue","onUpdate:modelValue","onDateSelect"])])]),body:o(()=>t[4]||(t[4]=[p(" 03/01/2025 ")])),_:1}),a(d,{header:"Operatore",field:"email",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:o(({filterModel:e,filterCallback:l})=>[r("div",se,[a(B,{fluid:"",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Filtra",onKeydown:W(s=>l(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),a(w,{class:M(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:s=>{e.value="",l()}},null,8,["class","onClick"])])]),body:o(({data:e})=>t[5]||(t[5]=[p(" Mario Rossi ")])),_:1}),a(d,{class:"min-w-[100px]",header:"Stato",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:o(({filterModel:e,filterCallback:l})=>[r("div",le,[a(I,{class:"w-[100px]",modelValue:e.value,"onUpdate:modelValue":[s=>e.value=s,l],options:i(P)(),"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),a(w,{class:M(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:s=>{e.value="",l()}},null,8,["class","onClick"])])]),body:o(({data:e})=>[a(b,{value:"Chiusa",severity:"danger"})]),_:1}),a(d,{class:"w-[50px]","align-frozen":"right",frozen:""},{body:o(({data:e})=>[r("div",ne,[Y(a(w,{icon:"pi pi-lock-open",severity:"secondary",rounded:"",text:""},null,512),[[Q,"Segnala come aperta",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","total-records","onSort","onPage","filters","loading"])])}}}),ie={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 mt-2"},de={class:"font-semibold text-2xl mb-4"},he=S({__name:"NotificationsView",props:{code:{}},setup(E){const m=c([]),f=D(),{totalUsers:u}=U(f),v=function(){m.value=[{label:"Tutte le segnalazioni",route:{name:Z.segnalazioni}}]};return z(()=>{v()}),(_,x)=>(T(),$("div",null,[a(H,{items:m.value},null,8,["items"]),r("div",ie,[r("div",de,F(i(u))+" "+F(i(u)==1?"Segnalazione":"Segnalazioni"),1)]),a(re)]))}});export{he as default};
