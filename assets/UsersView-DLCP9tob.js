import{u as C,a as P,T as r,L as Q,g as F,p as $,b as M,s as A,c as G,d as H,A as q}from"./role-BMvUB8lt.js";import{d as E,s as K,r as y,f as L,g as J,w as l,u as s,o as S,h as W,b as t,e as n,i as T,n as v,t as f,j as X,k as B,l as Y,T as Z,a as ee}from"./index-BMmkjg9s.js";import{s as te}from"./index-DM0mS0M8.js";const ae={class:"flex items-center gap-x-2"},se={class:"flex items-center gap-2"},oe={class:"flex items-center gap-x-2"},le={class:"flex items-center gap-x-2"},ne={class:"flex items-center gap-x-2"},ie={class:"flex items-center justify-center"},k=10,re=E({__name:"UserTable",setup(D){const u=C(),{users:h,totalUsers:p}=K(u),{onSort:_,onPage:w,onFilter:g,loadLazyData:z,isLoading:I}=P({rows:k},N);y(!1);const x=y({id:{value:"",matchMode:r.EQ},email:{value:"",matchMode:r.LIKE},role:{value:"",matchMode:r.EQ},first_name:{value:"",matchMode:r.LIKE},last_name:{value:"",matchMode:r.LIKE},partner_id:{value:"",matchMode:r.EQ},full_name:{value:"",matchMode:r.LIKE}});function R(){g(x.value)}async function N(m){try{await u.fetchUsers(m)}catch(i){console.error(i)}}const O=function(m){return{name:B.utentiDettaglio,params:{id:m}}};return L(()=>{z()}),(m,i)=>{const b=te,c=Y,d=A,V=G,U=H,j=Z;return S(),J(Q,{value:s(h),rows:k,"total-records":s(p),onSort:s(_),onPage:s(w),onFilter:R,filters:x.value,"onUpdate:filters":i[0]||(i[0]=e=>x.value=e),"data-key":"id",scrollable:"",loading:s(I),showGridlines:"",rowHover:!0},{empty:l(()=>i[2]||(i[2]=[W("Non ci sono utenti")])),default:l(()=>[t(d,{class:"min-w-[200px]","filter-field":"full_name",header:"Utente",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:l(({filterModel:e,filterCallback:o})=>[n("div",ae,[t(b,{fluid:"",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"text",placeholder:"Filtra",onKeydown:T(a=>o(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),t(c,{class:v(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:a=>{e.value="",o()}},null,8,["class","onClick"])])]),body:l(({data:e})=>[n("div",se,[i[1]||(i[1]=n("img",{src:"https://primefaces.org/cdn/primevue/images/avatar/ivanmagalhaes.png",style:{width:"32px"}},null,-1)),n("span",null,f(e.first_name)+" "+f(e.last_name),1)])]),_:1}),t(d,{class:"min-w-[200px]",header:"Email",field:"email",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:l(({filterModel:e,filterCallback:o})=>[n("div",oe,[t(b,{fluid:"",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"text",placeholder:"Filtra",onKeydown:T(a=>o(),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),t(c,{class:v(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:a=>{e.value="",o()}},null,8,["class","onClick"])])]),_:1}),t(d,{class:"min-w-[100px]",header:"Categoria",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:l(({filterModel:e,filterCallback:o})=>[n("div",le,[t(V,{class:"w-full",modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,o],options:s(F)(),"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),t(c,{class:v(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:a=>{e.value="",o()}},null,8,["class","onClick"])])]),body:l(({data:e})=>[t(U,{value:s($)(e.role),severity:s(M)(e.role)},null,8,["value","severity"])]),_:1}),t(d,{class:"min-w-[100px]",header:"Ruolo",field:"role",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1,"show-clear-button":!1},{filter:l(({filterModel:e,filterCallback:o})=>[n("div",ne,[t(V,{class:"w-[100px]",modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,o],options:s(F)(),"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue","options"]),t(c,{class:v(e.value?"":"invisible"),icon:"pi pi-filter-slash",variant:"text",rounded:"",onClick:a=>{e.value="",o()}},null,8,["class","onClick"])])]),body:l(({data:e})=>[t(U,{value:s($)(e.role),severity:s(M)(e.role)},null,8,["value","severity"])]),_:1}),t(d,{class:"w-[50px]","align-frozen":"right",frozen:""},{body:l(({data:e})=>[n("div",ie,[X(t(c,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:O(e.id)},null,8,["to"]),[[j,"Modifica",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","total-records","onSort","onPage","filters","loading"])}}}),ue={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 mt-2"},ce={class:"font-semibold text-2xl mb-4"},ve=E({__name:"UsersView",props:{code:{}},setup(D){const u=y([]),h=C(),{totalUsers:p}=K(h),_=function(){u.value=[{label:"Tutti gli utenti",route:{name:B.utenti}}]};return L(()=>{_()}),(w,g)=>(S(),ee("div",null,[t(q,{items:u.value},null,8,["items"]),n("div",ue,[n("div",ce,f(s(p))+" "+f(s(p)==1?"Utente":"Utenti"),1)]),t(re,{"is-partner":!!w.code},null,8,["is-partner"])]))}});export{ve as default};
